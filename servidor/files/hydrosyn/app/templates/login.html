<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <title>{{ texts.login }}</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body class="{{ theme }}-theme">
       {% include "components/preferences_selector.html" %}
    <h1>{{ texts.login }}</h1>

    {% if error %}
      <div class="alert alert-danger" style="color: red; margin-bottom: 1rem;">
        {{ error }}
      </div>
    {% endif %}
    <form method="post" action="/web/login">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        <label>{{ texts.username }}: <input type="text" name="username" required></label><br>
        <label>{{ texts.password }}: <div style="display: inline-flex; align-items: center; position: relative;">
    <input type="password" id="password-input" name="password" required style="padding-right: 30px;">
    <button type="button" id="toggle-password-btn" aria-label="Mostrar u ocultar contraseÃ±a" 
      style="position: absolute; right: 5px; background: none; border: none; cursor: pointer; padding: 0; margin: 0;">
      <!-- Ojo cerrado por defecto -->
      <svg id="eye-closed" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <path d="M17.94 17.94a10.35 10.35 0 0 1-5.94 1.68 10.35 10.35 0 0 1-5.94-1.68M1 1l22 22"/>
        <path d="M10.58 10.58a3 3 0 0 0 4.24 4.24"/>
        <path d="M9.5 9.5a3 3 0 0 1 4.5 4.5"/>
        <path d="M4.7 4.7a13.94 13.94 0 0 0 14.6 14.6"/>
      </svg>
      <!-- Ojo abierto oculto inicialmente -->
      <svg id="eye-open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" style="display:none;">
        <circle cx="12" cy="12" r="3"/>
        <path d="M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z"/>
      </svg>
    </button>
  </div>
</label>

<script>
  const passwordInput = document.getElementById('password-input');
  const toggleBtn = document.getElementById('toggle-password-btn');
  const eyeOpen = document.getElementById('eye-open');
  const eyeClosed = document.getElementById('eye-closed');

  toggleBtn.addEventListener('click', () => {
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      eyeOpen.style.display = 'inline';
      eyeClosed.style.display = 'none';
    } else {
      passwordInput.type = 'password';
      eyeOpen.style.display = 'none';
      eyeClosed.style.display = 'inline';
    }
  });
</script>
        <button type="submit">{{ texts.login }}</button>
    </form>

      <form method="get" action="/web/recover-password">
        <button type="submit">{{ texts.forgot }}</button>
    </form>
    <script src="/static/js/deviceInfo.js"></script>
    <script src="/static/js/security.js"></script>
</body>
</html>
